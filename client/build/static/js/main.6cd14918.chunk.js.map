{"version":3,"sources":["img/avocado.png","config/config.js","reducers/auth.js","actions/types.js","reducers/index.js","store.js","actions/auth.js","Login.jsx","Headbar.jsx","Posts.jsx","Home.jsx","App.jsx","Form.jsx","Post.jsx","Routs.jsx","index.jsx"],"names":["module","exports","SERVER","initialState","login","user","reducer","state","action","type","console","log","payload","update","$set","rootReducer","combineReducers","auth","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","status","stat","dispatch","Login","props","logOut","setState","LogOn","password","loginOnOff","this","username","className","onClick","Component","connect","statusLogin","Headbar","to","style","textDecoration","src","logo","alt","Posts","Localbase","postDelete","id","axios","delete","posts","length","newposts","filter","i","_id","author","bind","get","then","res","data","slice","reverse","map","post","key","date","title","content","pathname","Home","loginTryOn","pas","headers","dta","param","setTimeout","regTry","name","maxLength","ref","placeholder","required","value","App","addForm","validate","handleChange","handleSubmit","event","target","preventDefault","Date","toLocaleTimeString","hour","minute","toLocaleDateString","push","onSubmit","onChange","Post","redir","renderPost","a","location","customHistory","createBrowserHistory","Routs","history","exact","path","component","Form","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6cd14918.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avocado.3951c08c.png\";","module.exports = {\n\n    SERVER: \"http://localhost:3001\"\n    \n}","import  update   from 'immutability-helper';\nimport { AUTH_ON_OFF } from '../actions/types';\n\n\nconst initialState = {\n    login: '',\n    user: '',\n}\n\nconst reducer = (state = initialState, action) => {\n    const { type } = action;\n    console.log('ACTION', action.payload);\n\n    switch (type){\n        case AUTH_ON_OFF:\n            return update(state, {\n                login: { $set: action.payload.login },\n                user: { $set: action.payload.user },\n            });\n        default:\n            return state;\n    }\n       \n}\n\nexport default reducer;","export const AUTH_ON_OFF = 'AUTH_ON_OFF';","import { combineReducers } from 'redux';\nimport auth from './auth';\n\nconst rootReducer = combineReducers(\n        {\n            auth,\n        }\n);\n    \nexport default rootReducer;\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst initialState = {};\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n    rootReducer, \n    initialState, \n    composeEnhancer(applyMiddleware(thunk))\n);\n\nexport default store;\n\n\n","//import { startSession } from 'mongoose';\nimport { AUTH_ON_OFF } from './types';\n\nconst status = (stat) => (dispatch) =>{\n    dispatch({\n    type: AUTH_ON_OFF,\n    payload: {\n        login: stat.login,\n        user: stat.user,\n    }        \n    });\n\n}\n\nexport {status}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { status as statusLogin } from './actions/auth';\nimport \"./Login.css\";\n\n\nclass Login extends Component { \n    constructor(props) {\n        super(props);\n        this.state = {\n            LogOn: false,\n            user: '',\n            login: '',\n            password: '',\n            status: ''\n        };\n    }\n    logOut = () => {\n        this.setState({ LogOn: false, user: '', status: '' });\n        this.props.status({ login: false, user: '' })\n    }\n\n    render() {\n        const { loginOnOff } = this.props;\n        const { username } = this.props;\n        return (\n            <div className=\"back-login\">\n                { loginOnOff ?\n                    <div className=\"userplate\">\n                        <div className=\"userplate-name\">{username}</div>\n                        <button className=\"userplate-btn\"\n                            onClick={() => this.logOut()}\n                        >logout</button>\n                    </div> : null\n                }\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    loginOnOff: state.auth.login,\n    username: state.auth.user,\n});\n\nconst mapDispatchToProps = dispatch => ({\n    status: (stat) => dispatch(statusLogin(stat))\n});\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n\n\n","import React, { Component } from \"react\";  \nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport logo from './img/avocado.png'\nimport Login from \"./Login\";\nimport \"./Headbar.css\";\n\nclass Headbar extends Component {\n  \n  render() {   \n    const { loginOnOff } = this.props;\n    return (\n      <div className= \"back\">\n      { loginOnOff ?  \n      <div className= \"btn-div\">\n        <Link to=\"/\" className = \"link\" style={{ textDecoration: 'none' }}>\n              <button type=\"button\" className = \"button\">\n                Home\n              </button>\n        </Link> \n        <Link to=\"/newpost\" className = \"link\" style={{ textDecoration: 'none' }}>\n               <button type=\"button\" className = \"button\">\n                New post\n              </button>\n        </Link>\n      </div>\n      : <div className = \"img-div\"> \n            <img src= { logo } alt=\"Avocato Cat\"/> \n        <div className = \"title-div\">\n            Avocato Blog\n        </div>\n        </div> \n      }\n        <Login />\n      </div>\n    );  \n  }\n}\n\nconst mapStateToProps = state =>  ({\n  loginOnOff: state.auth.login\n});\n\nexport default connect (mapStateToProps)(Headbar);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { status as statusLogin } from './actions/auth';\nimport { Link } from 'react-router-dom';\nimport Localbase from 'localbase';\nimport axios from 'axios';\nimport {SERVER} from \"./config/config\";\nimport \"./Posts.css\";\n\nlet db = new Localbase('blog');\n\nclass Posts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posts: [],\n      id: '',\n      LogOn: false,\n      user: '',\n      login: '',\n      password: '',\n      status: '',\n      author: ''\n    };\n    //this.regTry = this.regTry.bind(this);\n    this.postDelete = this.postDelete.bind(this);\n  }\n\n  postDelete = (id) => {\n    axios.delete(`${SERVER}/post/${id}`, { id });\n    if (this.state.posts.length >= 0) {\n      const oldposts = this.state.posts;\n      const newposts = oldposts.filter(i => i._id !== id);\n      this.setState({ posts: newposts });\n    }\n  }\n\n /* loginTryOn = (log, pas) => {\n    if (log === '' || pas === '') {\n      this.setState({ status: 'Заполните все поля' })\n    }else {\n      axios.get(`${SERVER}/api/login/`, { headers: { log: log, pas: pas } })\n      .then(dta => dta.data)\n      .then(param => {\n          this.setState(param);\n          setTimeout(() => this.setState({ status: '' }), 2000);\n          this.props.status({ login: param.LogOn, user: param.user });\n          db.collection('dbUser').set([{ auth: param.LogOn, name: param.user }]).then(console.log(\"DB user из логина\"));\n          axios.get(`${SERVER}/api/posts/${this.props.username}`)\n            .then(res => res.data)\n            .then(posts => this.setState({posts})   \n        )})\n    }\n  }\n\n  regTry = (log, pas) => {\n    if (log === '' || pas === '') {\n      this.setState({ status: 'Заполните все поля' })\n    } else if (log.length > 10 || pas.length > 10) {\n      this.setState({ status: 'Логин и пароль должны быть не длиннее 10 символов' })\n    } else {\n      axios.post(`${SERVER}/api/login/`, { log, pas })\n        .then(dta => {\n          this.setState(dta.data);\n          setTimeout(() => this.setState({ status: '' }), 2000);\n        })\n    }\n  }*/\n\n  componentDidMount() {\n    console.log('в постс пропс юзернем-', this.props.username);\n    if (this.state.posts.length >= 0) { // >=\n      axios.get(`${SERVER}/posts/${this.props.username}`)\n        .then(res => res.data)\n        .then(posts => {\n          this.setState({ posts })\n        }\n        );\n    }\n  }\n  render() {\n    const { loginOnOff } = this.props;\n    const { username } = this.props;\n    return (\n      <div className=\"pole\">\n        <h1> Header</h1>\n          <div className=\"Posts\" >\n            {this.state.posts.slice(0).reverse().map(post =>\n              <div key={post.id} className=\"wrapper-posts\">\n                <div className=\"nameplate-posts-div\">\n                  <div className=\"nameplate-posts\">\n                    <b>Date:</b> &nbsp; {post.date}\n                  </div>\n                  <div className=\"nameplate-posts\">\n                    <b>Titile:</b> &nbsp; {post.title}\n                  </div>\n                </div>\n                <div className=\"text-pole-posts\">\n                  {post.content}\n                </div>\n                <div className=\"button-div\">\n                  <button\n                    onClick={() => { this.postDelete(post._id) }}\n                    className=\"delete-posts\"\n                    type=\"submit\"\n                  > delete\n                </button>\n                  <Link to={{\n                    pathname: `post/${post._id}`,\n                    state: { id: post._id }\n                  }} className=\"detail-posts\" > detail </ Link>\n                </div>\n              </div>\n            )}\n          </div>\n          \n        \n      </div>\n    );\n\n  };\n\n}\n\nconst mapStateToProps = state => ({\n  loginOnOff: state.auth.login,\n  username: state.auth.user,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  status: (stat) => dispatch(statusLogin(stat))\n});\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Posts);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { status as statusLogin } from './actions/auth';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Posts from './Posts';\nimport {SERVER} from \"./config/config\";\n\nclass Home extends Component { \n    constructor(props) {\n        super(props);\n        this.state = {\n            LogOn: false,\n            user: '',\n            login: '',\n            password: '',\n            status: ''\n        };\n    }\n    loginTryOn = (log, pas) => {\n        if (log === '' || pas === '') {\n          this.setState({ status: 'Заполните все поля' })\n        }else {\n          axios.get(`${SERVER}/api/login/`, { headers: { log: log, pas: pas } })\n          .then(dta => dta.data)\n          .then(param => {\n              this.setState(param);\n              setTimeout(() => this.setState({ status: '' }), 2000);\n              this.props.status({ login: param.LogOn, user: param.user });\n              console.log(\"login удачный, в редаксе: \", this.props.username )\n          })\n        }\n      }\n    \n      regTry = (log, pas) => {\n        if (log === '' || pas === '') {\n          this.setState({ status: 'Заполните все поля' })\n        } else if (log.length > 10 || pas.length > 10) {\n          this.setState({ status: 'Логин и пароль должны быть не длиннее 10 символов' })\n        } else {\n          axios.post(`${SERVER}/api/login/`, { log, pas })\n            .then(dta => {\n              this.setState(dta.data);\n              setTimeout(() => this.setState({ status: '' }), 2000);\n            })\n        }\n      }\n\n    render() {\n        const { loginOnOff } = this.props;\n        const { username } = this.props;\n        return (\n          <div className=\"pole\">\n           { !loginOnOff ?\n            <form className=\"login-div\">\n            <input\n              className=\"login\"\n              name=\"login\"\n              maxLength=\"15\"\n              ref={ref => this.login = ref}\n              type=\"text\"\n              placeholder=\"login\"\n              required />\n            <button\n              onClick={() => {\n                const log = `${this.login.value}`\n                const pas = `${this.password.value}`\n                this.loginTryOn(log, pas)\n              }}\n              type=\"button\"\n              className=\"login-button\"\n            > login </button>\n            <input\n              className=\"password\"\n              name=\"password\"\n              maxLength=\"15\"\n              ref={ref => this.password = ref}\n              type=\"password\"\n              placeholder=\"password\"\n              required />\n              \n            <button\n              onClick={() => {\n                const log = `${this.login.value}`\n                const pas = `${this.password.value}`\n                this.regTry(log, pas)\n              }}\n              type=\"button\"\n              className=\"reg-button\"\n            > register</button>\n            <div className=\"status\">{this.state.status}</div>\n          </form>: <Posts />\n          }          \n      </div>\n        )\n    }\n}\n\n\n\nconst mapStateToProps = state => ({\n    loginOnOff: state.auth.login,\n    username: state.auth.user,\n});\n\nconst mapDispatchToProps = dispatch => ({\n    status: (stat) => dispatch(statusLogin(stat))\n});\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","\nimport React from 'react';\nimport Headbar from './Headbar';\nimport Home from './Home';\n\n\nconst App = () => {\n    return (\n      <div>\n        <Headbar />\n        <Home />    \n      </div>\n    );\n  };\n\nexport default App;","import React, { Component } from \"react\";  \nimport axios from \"axios\";\nimport { Redirect } from \"react-router\";\nimport { connect } from 'react-redux';\nimport Headbar from \"./Headbar\";\nimport {SERVER} from \"./config/config\"\nimport \"./Form.css\";\n\nclass addForm extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n                  validate: false,\n                  author: '',\n                  date: '',\n                  title: '',\n                  content: ''\n                };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n       [event.target.name]: event.target.value\n      });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    axios.post(`${SERVER}/api/posts/`,{\n      author: this.state.author,\n      date: `${(new Date()).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) + \", \" + (new Date()).toLocaleDateString()}`,\n      title: this.state.title,\n      content: this.state.content,\n     });\n     this.setState ({   \n      author: '',\n      date: '',\n      title:'',\n      content: '',\n      validate: true\n     });\n  }\n  \n  componentDidUpdate() {\n    if (this.state.validate) {\n      axios.get(`${SERVER}/api/posts/${this.props.username}`)\n      .then(res => res.data)\n      .then(posts => this.setState({ posts }));\n    }\n  }\n  \n  render() {  \n    if (this.state.validate) {return <Redirect push to=\"/\" />}\n    const { username } = this.props;\n    this.state.author =  username;\n    return (\n      <div> \n        <Headbar />  \n        <form className=\"form\" onSubmit={this.handleSubmit}>\n          <input \n                 className= \"forminput\"\n                 name=\"title\"\n                 type=\"text\" \n                 value={this.state.title} \n                 onChange={this.handleChange} \n                 placeholder=\"title\"/>\n          <br/><br/>    \n          <textarea\n                 className = \"formtextpole\"\n                 name=\"content\"\n                 type=\"text\" \n                 value={this.state.content}  \n                 onChange={this.handleChange} \n                 title={\"Post text\"}\n                 />\n          <br/><br/> \n          <input \n                className= \"formButton\"\n                type=\"submit\" \n                value=\"send\" \n          />\n        </form>  \n      </div>\n\n    );  \n  }\n}\n\nconst mapStateToProps = state => ({\n   username: state.auth.user,\n});\n\nexport default connect (mapStateToProps)(addForm);\n","import React, { Component } from 'react';\nimport { Redirect } from \"react-router\";\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport Headbar from \"./Headbar\";\nimport {SERVER} from \"./config/config\"\nimport \"./Post.css\";\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n                  redir: false,\n                  author:'',\n                  date:'',\n                  title:'',\n                  content:''\n                };\n  this.postDelete = this.postDelete.bind(this);\n  }\n  componentDidMount() {\n    this.renderPost();\n  }\n\n  postDelete = (id) => {\n    this.setState({redir: true});\n    axios.delete(`${SERVER}/post/${id}`, { id });\n    }\n  \n  renderPost = async() => {\n      console.log(this.props.location.state.id);\n      const id = this.props.location.state.id;\n      await axios.get(`${SERVER}/post/${id}`, {id})\n      .then(post => this.setState(post.data)); \n  }\n  \n  componentDidUpdate() {\n    if (this.state.redir) {\n      axios.get(`${SERVER}/api/posts/${this.props.username}`)\n      .then(res => res.data)\n      .then(posts => this.setState({ posts }));\n    }\n  }\n    \n  render() {\n    const { username } = this.props;\n    if (this.state.redir) { return <Redirect push to=\"/\" /> }  \n    return (\n      <div>\n        <div className = \"wrapper-post\">\n          <div className = \"nameplate-post-div\">\n            <div className = \"nameplate-post\">\n              <b>Date:</b> &nbsp; {this.state.date}\n            </div>\n            <div className = \"nameplate-post\">\n              <b>Title:</b> &nbsp; {this.state.title}\n            </div>\n            </div>\n            <div className = \"post-text-pole\">\n                {this.state.content}\n            </div>\n            <button\n                    onClick= { () => {this.postDelete(this.state._id)}}\n                    className = \"delete-post\"\n                    type = \"submit\"\n                    > delete               \n            </button>\n         </div>\n         </div>\n        )}\n      \n }     \n\n const mapStateToProps = state => ({\n  username: state.auth.user,\n});\n\nexport default connect (mapStateToProps)(Post);\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport App from './App';\nimport Form from './Form';\nimport Posts from './Posts';\nimport Post from './Post';\nimport Home from './Home';\nimport { createBrowserHistory } from \"history\";\nconst customHistory = createBrowserHistory();\n\nconst Routs = () => {\n    return (\n        <Router history = {customHistory}>\n          <Switch> \n              <Route exact path=\"/\" component= {App} />\n              <Route path=\"/newpost\" component= {Form} />\n              <Route path=\"/posts/:username\" component= {Posts} />\n              <Route path=\"/post/:_id\" component= {Post}/>  \n          </Switch>\n        </Router>     \n    \n    );\n  };\n\n  export default Routs;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport Routs from './Routs';\n\nReactDOM.render(\n  <Provider store={store}>\n  <React.StrictMode>\n      <Routs />\n  </React.StrictMode>\n  </Provider>, \n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}