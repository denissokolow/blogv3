(this.webpackJsonpAvocadoBlog=this.webpackJsonpAvocadoBlog||[]).push([[0],{45:function(t,e,a){t.exports=a.p+"static/media/avocado.3951c08c.png"},48:function(t,e,a){t.exports=a(88)},57:function(t,e,a){},58:function(t,e,a){},8:function(t,e){t.exports={SERVER:"http://localhost:3001"}},84:function(t,e,a){},85:function(t,e,a){},87:function(t,e,a){},88:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),o=a(21),r=a.n(o),l=a(4),c=a(17),i=a(43),u=a(44),p=a.n(u),m={login:"",user:""},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0,a=e.type;switch(console.log("ACTION",e.payload),a){case"AUTH_ON_OFF":return p()(t,{login:{$set:e.payload.login},user:{$set:e.payload.user}});default:return t}},h=Object(c.c)({auth:d}),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,b=Object(c.e)(h,{},f(Object(c.a)(i.a))),E=a(16),g=a(2),v=a(3),O=a(11),N=a(13),j=a(12),y=a(45),S=a.n(y),w=function(t){return function(e){e({type:"AUTH_ON_OFF",payload:{login:t.login,user:t.user}})}},k=(a(57),function(t){Object(N.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).logOut=function(){n.setState({LogOn:!1,user:"",status:""}),n.props.status({login:!1,user:""})},n.state={LogOn:!1,user:"",login:"",password:"",status:""},n}return Object(O.a)(a,[{key:"render",value:function(){var t=this,e=this.props.loginOnOff,a=this.props.username;return s.a.createElement("div",{className:"back-login"},e?s.a.createElement("div",{className:"userplate"},s.a.createElement("div",{className:"userplate-name"},a),s.a.createElement("button",{className:"userplate-btn",onClick:function(){return t.logOut()}},"logout")):null)}}]),a}(n.Component)),D=Object(l.b)((function(t){return{loginOnOff:t.auth.login,username:t.auth.user}}),(function(t){return{status:function(e){return t(w(e))}}}))(k),C=(a(58),function(t){Object(N.a)(a,t);var e=Object(j.a)(a);function a(){return Object(v.a)(this,a),e.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var t=this.props.loginOnOff;return s.a.createElement("div",{className:"back"},t?s.a.createElement("div",{className:"btn-div"},s.a.createElement(E.b,{to:"/",className:"link",style:{textDecoration:"none"}},s.a.createElement("button",{type:"button",className:"button"},"Home")),s.a.createElement(E.b,{to:"/newpost",className:"link",style:{textDecoration:"none"}},s.a.createElement("button",{type:"button",className:"button"},"New post"))):s.a.createElement("div",{className:"img-div"},s.a.createElement("img",{src:S.a,alt:"Avocato Cat"}),s.a.createElement("div",{className:"title-div"},"Avocato Blog")),s.a.createElement(D,null))}}]),a}(n.Component)),R=Object(l.b)((function(t){return{loginOnOff:t.auth.login}}))(C),x=a(23),_=a(7),T=a.n(_),L=a(15),V=a(8),A=(a(84),new x.a("blog")),B=function(t){Object(N.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).postDelete=function(t){if(T.a.delete("".concat(V.SERVER,"/api/post/").concat(t),{id:t}),n.state.posts.length>=0){var e=n.state.posts.filter((function(e){return e._id!==t}));n.setState({posts:e})}},n.state={posts:[],id:"",LogOn:!1,user:"",login:"",password:"",status:"",author:""},n.postDelete=n.postDelete.bind(Object(L.a)(n)),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var t=this;console.log("\u0432 \u043f\u043e\u0441\u0442\u0441"),this.state.posts.length>=0&&T.a.get("".concat(V.SERVER,"/api/posts/").concat(this.props.username)).then((function(t){return t.data})).then((function(e){t.setState({posts:e}),A.collection("dbPosts").set(e)}))}},{key:"render",value:function(){var t=this,e=this.props.loginOnOff;this.props.username;return s.a.createElement("div",{className:"pole"},e?s.a.createElement("div",{className:"Posts"},this.state.posts.slice(0).reverse().map((function(e){return s.a.createElement("div",{key:e.id,className:"wrapper-posts"},s.a.createElement("div",{className:"nameplate-posts-div"},s.a.createElement("div",{className:"nameplate-posts"},s.a.createElement("b",null,"Date:")," \xa0 ",e.date),s.a.createElement("div",{className:"nameplate-posts"},s.a.createElement("b",null,"Titile:")," \xa0 ",e.title)),s.a.createElement("div",{className:"text-pole-posts"},e.content),s.a.createElement("div",{className:"button-div"},s.a.createElement("button",{onClick:function(){t.postDelete(e._id)},className:"delete-posts",type:"submit"}," delete"),s.a.createElement(E.b,{to:{pathname:"api/posts/".concat(e._id),state:{id:e._id}},className:"detail-posts"}," detail ")))}))):null)}}]),a}(n.Component),P=Object(l.b)((function(t){return{loginOnOff:t.auth.login,username:t.auth.user}}),(function(t){return{status:function(e){return t(w(e))}}}))(B),U=new x.a("blog"),F=function(t){Object(N.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).loginTryOn=function(t,e){""===t||""===e?n.setState({status:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"}):T.a.get("".concat(V.SERVER,"/api/login/"),{headers:{log:t,pas:e}}).then((function(t){return t.data})).then((function(t){n.setState(t),setTimeout((function(){return n.setState({status:""})}),2e3),n.props.status({login:t.LogOn,user:t.user}),console.log("login \u0443\u0434\u0430\u0447\u043d\u044b\u0439, \u0432 \u0440\u0435\u0434\u0430\u043a\u0441\u0435: ",n.props.username),U.collection("dbUser").set([{auth:t.LogOn,name:t.user}]).then(console.log("DB user \u0438\u0437 \u043b\u043e\u0433\u0438\u043d\u0430"))}))},n.regTry=function(t,e){""===t||""===e?n.setState({status:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"}):t.length>10||e.length>10?n.setState({status:"\u041b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043d\u0435 \u0434\u043b\u0438\u043d\u043d\u0435\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}):T.a.post("".concat(V.SERVER,"/api/login/"),{log:t,pas:e}).then((function(t){n.setState(t.data),setTimeout((function(){return n.setState({status:""})}),2e3)}))},n.state={LogOn:!1,user:"",login:"",password:"",status:""},n}return Object(O.a)(a,[{key:"render",value:function(){var t=this,e=this.props.loginOnOff;this.props.username;return s.a.createElement("div",{className:"pole"},e?s.a.createElement("form",{className:"login-div"},s.a.createElement("input",{className:"login",name:"login",maxLength:"15",ref:function(e){return t.login=e},type:"text",placeholder:"login",required:!0}),s.a.createElement("button",{onClick:function(){var e="".concat(t.login.value),a="".concat(t.password.value);t.loginTryOn(e,a)},type:"button",className:"login-button"}," login "),s.a.createElement("input",{className:"password",name:"password",maxLength:"15",ref:function(e){return t.password=e},type:"password",placeholder:"password",required:!0}),s.a.createElement("button",{onClick:function(){var e="".concat(t.login.value),a="".concat(t.password.value);t.regTry(e,a)},type:"button",className:"reg-button"}," register"),s.a.createElement("div",{className:"status"},this.state.status)):s.a.createElement(P,null))}}]),a}(n.Component),M=Object(l.b)((function(t){return{loginOnOff:t.auth.login,username:t.auth.user}}),(function(t){return{status:function(e){return t(w(e))}}}))(F),H=function(){return s.a.createElement("div",null,s.a.createElement(R,null),s.a.createElement(M,null))},I=a(46),q=(a(85),function(t){Object(N.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).state={validate:!1,author:"",date:"",title:"",content:""},n.handleChange=n.handleChange.bind(Object(L.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(L.a)(n)),n}return Object(O.a)(a,[{key:"handleChange",value:function(t){this.setState(Object(I.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault(),T.a.post("".concat(V.SERVER,"/api/posts/"),{author:this.state.author,date:"".concat((new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+", "+(new Date).toLocaleDateString()),title:this.state.title,content:this.state.content}),this.setState({author:"",date:"",title:"",content:"",validate:!0})}},{key:"componentDidUpdate",value:function(){var t=this;this.state.validate&&T.a.get("".concat(V.SERVER,"/api/posts/").concat(this.props.username)).then((function(t){return t.data})).then((function(e){return t.setState({posts:e})}))}},{key:"render",value:function(){if(this.state.validate)return s.a.createElement(g.a,{push:!0,to:"/"});var t=this.props.username;return this.state.author=t,s.a.createElement("div",null,s.a.createElement(R,null),s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("input",{className:"forminput",name:"title",type:"text",value:this.state.title,onChange:this.handleChange,placeholder:"title"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("textarea",{className:"formtextpole",name:"content",type:"text",value:this.state.content,onChange:this.handleChange,title:"Post text"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("input",{className:"formButton",type:"submit",value:"send"})))}}]),a}(n.Component)),J=Object(l.b)((function(t){return{username:t.auth.user}}))(q),X=a(29),$=a.n(X),z=a(47),G=(a(87),function(t){Object(N.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).postDelete=function(t){n.setState({redir:!0}),T.a.delete("".concat(V.SERVER,"/api/post/").concat(t),{id:t})},n.renderPost=Object(z.a)($.a.mark((function t(){var e;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n.props.location.state.id),e=n.props.location.state.id,t.next=4,T.a.get("".concat(V.SERVER,"/api/post/").concat(e),{id:e}).then((function(t){return n.setState(t.data)}));case 4:case"end":return t.stop()}}),t)}))),n.state={redir:!1,author:"",date:"",title:"",content:""},n.postDelete=n.postDelete.bind(Object(L.a)(n)),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.renderPost()}},{key:"componentDidUpdate",value:function(){var t=this;this.state.redir&&T.a.get("".concat(V.SERVER,"/api/posts/").concat(this.props.username)).then((function(t){return t.data})).then((function(e){return t.setState({posts:e})}))}},{key:"render",value:function(){var t=this;this.props.username;return this.state.redir?s.a.createElement(g.a,{push:!0,to:"/"}):s.a.createElement("div",null,s.a.createElement(R,null),s.a.createElement("div",{className:"wrapper-post"},s.a.createElement("div",{className:"nameplate-post-div"},s.a.createElement("div",{className:"nameplate-post"},s.a.createElement("b",null,"Date:")," \xa0 ",this.state.date),s.a.createElement("div",{className:"nameplate-post"},s.a.createElement("b",null,"Title:")," \xa0 ",this.state.title)),s.a.createElement("div",{className:"post-text-pole"},this.state.content),s.a.createElement("button",{onClick:function(){t.postDelete(t.state._id)},className:"delete-post",type:"submit"}," delete")))}}]),a}(n.Component)),K=Object(l.b)((function(t){return{username:t.auth.user}}))(G),Q=function(){return s.a.createElement("section",null,s.a.createElement(E.a,null,s.a.createElement(g.d,null,s.a.createElement(g.b,{path:"/newpost",component:J}),s.a.createElement(g.b,{path:"/posts",component:P}),s.a.createElement(g.b,{exact:!0,path:"/",component:H}),s.a.createElement(g.b,{path:"/api/posts/",component:K}))))};r.a.render(s.a.createElement(l.a,{store:b},s.a.createElement(s.a.StrictMode,null,s.a.createElement(Q,null))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.52c34a7b.chunk.js.map